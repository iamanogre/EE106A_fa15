 <!DOCTYPE html>
 <html>
 
 <head>
 	<title>Zumy Light Exploration</title>
 
 	<!-- CSS --> 
 	<link rel="stylesheet" href="css/skeleton.css">
 	<link rel="stylesheet" href="css/custom.css">
 </head>
 <body>
 
 <!-- .container is main centered wrapper -->


 <div class="container" style="width:100%;word-wrap:break-word;">
 
    <div class="row" style="position:fixed;background-color:#FFFFFF;margin-top:-10px;margin-bottom:-10px;z-index:99">
      <div class="twelve columns">
        <a class="button" href="#intro"> Introduction</a>
        <a class="button" href="#design">Design</a>
        <a class="button" href="#implementation">Implementation</a>
        <a class="button" href="#result">Results</a>
        <a class="button" href="#conclusion">Conclusion</a>
        <a class="button" href="#team">Team</a>
        <a class="button" href="#add_materials">Additional Materials</a>
      </div>
    </div>

    <!-- Abstract and preview so people know what's happening-->
    <div class="row" style="padding-top:2em;" id="home">
      <div class="twelve columns">
        <h1>Zumy Light Exploration <span style="float:right">EE106A Fall 2015 Final Project</span></h1>
        <p style="padding-top:2em;"></p>
        <p style="text-align:center;"><img src="img/Front_pic_v1.jpg" alt="Zumy" style="width:100%; height:auto;"></p>
       	<h3 style="text-align:center;margin-top:-2.1em;text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000; color:white;opacity:0.9;"><em>"simulating the exploration of an unknown planet"</em></h3>
      </div>
    </div>

    <p class="excess" id="intro"></p> 
    <div class="row">
      <div class="twelve columns">
        <h2 class="header">1) Introduction</h2>
        <p>The goal of this project is to successfully launch an autonomous network of three Zumies (small mobile robots, as seen above) to explore a surrounding area in search of light. The purpose of searching for light is to recharge the Zumies' solar cells and effectively keep each other running autonomously whilst exploring an unknown enviroment. Interesting features of this project are the ROS (Robot Operating System) network that connects, coordinates, and runs the Zumies as well as the light sensing and position tracking components.</p>

        <p>Our mission is to one day have the Zumies on another planet, aiding in autonomous planet exploration with the self-sustainable tactic of locating light and communicating to each other the best source of light. </p>

        <p>Here is a sample video.</p> 
       
      </div>
    </div>
 
  <!-- acceptable -->
    <p class="excess" id="design"></p> 
   	<div class="row">
     	<div class="twelve columns">
        <h2 class="header">2) Design</h2>
        <h3>a) Initial Design</h3>
        <ol>
          <li>Position system</li>
          <ul>
            <li>Mounted camera's for realistic exploration</li>
            <li>AR tags which act as objects of known positions</li>
            <li>Kalman Filter (IMU's) for estimating position</li>
          </ul>
          <li>Exploration and Light Sensing</li>
          <ul>
            <li>Split exploration region for Zumies to cover area efficiently</li>
            <li>Find area of highest light intensity to charge their cells</li>
          </ul>
        </ol>
        <h3>b) Final Design</h3>
        <p>*position tracking
  Must meet using landmark AR tags + kalman filter.
  Only came out to be landmark AR tags + global camera.
*area exploration.
  Split area to explore evenly between zumies. Get a zumy to send a signal when it sees area of highest exploration. Other zumies gather to it.
  Need to outfit zumy with photocells + camera.</p>
        <p>start off with an overview of the final design showing the entire setup and then we explain each section of the design in more details (below) - use pictures/diagrams whenever you can.
*position tracking
  Only working with landmark AR tags + global camera.
  Created a node called tf_service and this took tf from readings off of the zumy, converted them into positions + orientation of zumy area from conversion of quaternion & vector 3 to rotations into position and theta angle.
  Created a node called global_service and this takes tf readings from the global camera and because it takes the tf between the zumy’s it is looking at and the origin tag, does same processing as above and returns the position and theta of the zumy.
*area exploration.
  Made an explorer node that created a service with the light tracking zumies and this node told them where to go after reading each zumy’s light and position data. Explorer node split area to explore evenly between zumies, was in charge of the keepExploring flag and got the zumies to travel to each other. Can also issue hard stops. 
    *zumy design
  Outfitted zumy with photocells. Talk about zumy design. Zumy has Microsoft lifecam mounted on it. Breadboard taped on it’s back and voltage dividers. Wires stick to the front of it into its analog pins for readings. Had to calibrate and find the right sensors that gave off similar readings.
*zumy controller
  Each zumy has a controller node. This node takes in the zumy’s photo data and when the zumy sees an AR tag, takes the position and theta from the tf_service, or when the zumy does not see an AR tag, takes the position readings from the global_service. Controller takes both of these and sends this data to the explorer node. What gets back is a position it should make the zumy go to. The Controller knows the position of the zumy and calculates the correct twist to make and sends this twist to the zumy to go to.
</p>

        <h3>c) What design choices did you make when you formulated your design? What tradeoffs did you have to make?</h3>
        <p>Traded kalman filter for global camera. Did not add noise to the global camera reading, but should have to simulate reality. 
We decided to keep all of our services separate simply to be able to easily debug. Ideally, we would have combined these 3 services into 1. This one service would basically generate its own positions and thetas from parsing through all the tf’s, maintain a position and theta of each zumy, read in photo data readings from the zumy, do all the computation of the three services, and would effectively publish only a twist to each zumy.</p>
        <h3>d) How do these design choices impact how well the project meets design criteria which would be encountered in a real engineering application, such as robustness, durability, and efficiency?</h3>
        <p>Meets pretty well because robustness was building around and on the zumy. Durability is another issue because zumy breaks down, but that’s not really our problem. Efficiency is that it can be expanded out.</p>
      </div>
    </div>

    <p class="excess" id="implementation"></p> 
   	<div class="row">
     	<div class="twelve columns">
        <h2 class="header">3) Implementation</h2>
          <h3>a) Hardware Used. Illustrate with pictures and diagrams.</h3>
          <p>Zumy - a small mobile robot. Relevant features are the Linux OS on the robot to interface with ROS, USB connectors for camera and wifi to communicate with network, pins for analog input, gyroscope and accelerometer originally meant to communicate with the Kalman filter. 
<p>Camera - camera mounted onto the zumy. Sends image to zumy which processes image with ar_track_alvar, an AR tag tracking library, which returns transforms used in our tracking algorithm</p><p>
Photoresistor - light sensitive resistor. Has variable resistance that changes with exposure to light</p><p>
Voltage divider circuit - simple circuit taking advantage of photoresistor’s dynamic resistance to output a variable voltage</p>
        <h3>b) Parts</h3>
        <p>
Put 4 voltage divider circuits on a breadboard. Attached it to a piece of cardboard which was attached to back of zumy. Connected wires to analog inputs of Zumy. Transform between camera and AR tag is calculated by zumy and sent through wifi to network as a tf topic.  
</p>

        <h3>Zumy Picture</h3>
        <p style="text-align:center;"><img src="img/ZumyIllustration.jpg" alt="Zumy"></p>

        <h3>c) Describe any software you wrote in detail. Illustrate with diagrams, flow charts, or other appropriate visuals. This includes launch files, URDFs, etc.</h3>
        <p>Pictures of services and stuff</p>
        <h3>How does your complete system work? Describe each step.</h3>
        <p>Going to have to put some commands to tell people how to set up the project. Also what to change + catkin_make and setup bash stuff</p>
      </div>
   	</div>
 
    <p class="excess" id="result"></p> 
   	<div class="row">
     	<div class="twelve columns">
        <h2 class="header">4) Result</h2>
        <h3>a) How well did your project work? What tasks did it perform?</h3>
        <p>The project was a success. We managed to get 1 Zumy to explore an area marked 
out with Landmark AR tags and with an overlooking global AR tag and measure the level of light as it does so. When the zumy records a level of light above a certain threshold, it stops and tells the other zumy to come join it. We only had 1 sensorized Zumy and 1 Unsensorized zumy because it meant we had to modifiy the hardware quite a bit and would make other Zumies unusable. The code is set up to easily allow other Zumies to join in.</p>
        <h3>b) Illustrate with a video and pictures</h3>
        <p>See pictures and videos.</p>
      </div>
   	</div>
 
    <p class="excess" id="conclusion"></p> 
   	<div class="row">
     	<div class="twelve columns">
        <h2 class="header">5) Conclusion</h2>
        <h3>a) Final Design Overview / Results. How well did your finished solution meet your design criteria?</h3>
        <p>Have a nice table showing our design criteria and comparing it to the final design criteria - explain why they are not the same if so</p>
        <table class="u-full-width">
          <thead>
            <td></td>
            <td>Achieved</td>
            <td>Objective</td>
          </thead>
          <tr>
            <td>Positioning System</td>
            <td>4 Landmark AR tags<br>Mounted Camera<br><span style="color:red">Global Camera</span></td>
            <td>AR tags on each Zumy<br>Mounted Cameras<br><span style="color:red">Kalman Filter</span></td>
          </tr>
          <tr>
            <td>Light Sensing</td>
            <td>1 Zumy with 4 light sensors</td>
            <td>Each Zumy has light sensors</td>
          </tr>
          <tr>
            <td>Exploration</td>
            <td>Split region between 2 Zumies</td>
            <td>Split region between Zumies</td>
          </tr>
        </table>

        <h3>b) Difficulties. Does your solution have any flaws or hacks? </h3>
        <p>Kalman filter and sometimes the global camera wasn’t too reliable / The global camera is a hack and if we had more time we could remove it by adding a KF.  → This is basically explaining any further improvements we wish to make</p>
        <table class="u-full-width">
          <thead>
            <td>Deviations</td>
            <td>Temporary Fix</td>
            <td>More Permanent Solution</td>
          </thead>
          <tr>
            <td>Kalman Filter with accelerometer was not very accurate making <span>position tracking</span> difficult</td>
            <td>Used a global camera to look at Zumies to simulate a system that can keep track of Zumy if it doesn't find an AR tage and origion to find orientation</td>
            <td>Possible solutions include:<br>- Improve filter, accelerometer, and gyroscope<br>- Use wheel encoders to estimate distance</td>
          </tr>
          <tr>
            <td>Using only 2 Zumies, only 1 has light sensors</td>
            <td></td>
            <td>Current code can easily be expanded to account for more zumies</td>
          </tr>
        </table>

        <h3>c) Summary</h3>
        <p>Successfully met attainable objectives, but not reach goals, such as using 3 Zumies.</p>

        <h3>d) Future Improvements</h3>
        <ul>
          <li>Combine all services into one package that takes all the information around the system, parses through all of it, and simply issues each zumy a twist.</li>
          <li>Implement more permanent solutions, i.e. remove the global camera and use the Kalman Filter.</li>
          <li>Eliminate the use of AR tags by simply using image detection algorithms and by only using the Zumy's cameras.</li>
        </ul>
      </div>
   	</div>
 
    <p class="excess" id="team"></p> 
   	<div class="row" id="team">
     	<div class="twelve columns">
        <h2 class="header">6) Team</h2>
          <h3>Gary Choi</h3>
          <p>Stuff</p>
          <h3>Gary Hoang</h3>
          <p>Stuff</p>
          <h3>Xavier Lavenir</h3>
          <p>Stuff</p>         
      </div>
 	</div>
     
    <p class="excess" id="add_materials"></p> 
   	<div class="row" id="add_materials">
     	<div class="twelve columns">
        <h2 class="header">7) Additional Materials</h2>
        <h3>a) Code, URDFs, and launch files you wrote</h3>
        <p>Link to github</p>
        <h3>b) Datasheets for components used in your solution</h3>
        <p>photocells, 10 k-ohm resistors</p>
      </div>
   	</div>
 
 </div>
 </body>
 </html>
